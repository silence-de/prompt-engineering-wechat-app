### 顶层设计与技术架构

这是一个实现你想法的顶层架构图和关键页面流程。

#### A. 技术架构选型

  * **前端**：微信小程序原生框架 (WXML + WXSS + JavaScript)。
  * **后端**：**微信小程序“云开发” (Tencent CloudBase)**。
      * **为什么用云开发？** 这是最符合你“复用官方kit，避免造轮子”要求的方式。
      * **云函数**：你可以在云函数（Node.js环境）中安全地调用OpenAI/Anthropic的API。API Key等敏感信息存储在云函数的环境变量中，前端无法访问。
      * **云数据库**：虽然MVP可以用本地存储，但未来做“提示词优化”或“社区分享”时，云数据库可以无缝存储用户数据。
      * **天然鉴权**：云函数可以天然获取到调用者的`OpenID`，省去了你自己做`wx.login`后传`code`到服务器再换`OpenID`的繁琐步骤。

#### B. 核心页面流程 (Page Flow)

1.  **首页 (pages/index/index)**

      * **功能**：展示“课程列表”。
      * **设计**：一个简单的垂直列表，每一项都是一个课程卡片。
      * **组件**：使用 `wx:for` 循环渲染课程列表。
      * **数据**：课程列表（标题、简介、图标）可以直接在 `page.data` 中硬编码，实现极速加载。
      * **交互**：点击卡片，使用 `wx.navigateTo` 跳转到“课程详情页”，并传入课程ID（如 `lessonId=1`）。

2.  **课程详情页 (pages/lesson/lesson)**

      * **功能**：这是小程序的核心。
      * **布局**：
        1.  **概念区 (Concept)**：用 `<text>` 简单介绍本课技巧（例如：“技巧：给AI一个明确的角色，它会回答得更专业”）。
        2.  **对比区 (Compare)**：
              * 左右分栏或上下对比。
              * **左侧（差提示词）**：一个 `<textarea>` (disabled, 灰色)，显示一个“坏”例子。
              * **右侧（好提示词）**：一个 `<textarea>` (disabled, 绿色)，显示一个“好”例子。
        3.  **体验区 (Try)**：
              * **“动手试试”**：一个可编辑的 `<textarea>`，**预先填入“好提示词”的模板**，用户可以在此基础上修改。
              * **“运行”按钮**：一个 `<button>`。
        4.  **结果区 (Result)**：
              * 初始隐藏。点击“运行”后出现。
              * **“差”结果**：一个用于展示AI返回结果的区域（推荐使用 `rich-text` 来渲染Markdown）。
              * **“好”结果**：另一个 `rich-text` 区域。
              * **“你的”结果**：展示用户自己尝试的Prompt返回的结果。

#### C. 核心交互逻辑 (调用AI)

1.  用户在“课程详情页”点击 **“运行”** 按钮。
2.  **前端 (`.js` 文件)**：
      * 调用 `wx.showLoading({ title: 'AI思考中...' })`。
      * 获取“差提示词”、“好提示词”和用户“尝试的提示词”的内容。
      * 调用 **云函数**（例如 `callLlm`）。
      * `wx.cloud.callFunction({ name: 'callLlm', data: { prompts: [badPrompt, goodPrompt, userPrompt] } })`
3.  **后端 (云函数 `callLlm/index.js`)**：
      * 云函数接收到 `prompts` 数组。
      * **注意**：为了节约成本和控制体验，你不应该真的让用户“随便”调用。
      * **推荐做法**：你的云函数应该**内置**针对每个课程的**固定回复**。
          * 例如，对于“角色扮演”课，云函数 *不需要* 真的去调用OpenAI。
          * 它只需要根据`lessonId`，直接返回一个\*\*预先准备好（Mock）\*\*的“差回复”和“好回复”。
          * **这能100%保证你的教学效果**，因为AI的回答有时不稳定，可能“差提示词”碰巧也回答得很好，你的教学就失败了。
      * **“动手试试”的调用**：只有用户自己修改的那个`userPrompt`，才需要**真正去调用**OpenAI/Anthropic的API。
      * 云函数 `return { results: [mockBadResult, mockGoodResult, realUserResult] }`。
4.  **前端 (`.js` 文件)**：
      * 在 `.then()` 回调中拿到 `results`。
      * 调用 `wx.hideLoading()`。
      * 使用 `this.setData()` 将 `results` 渲染到页面的“结果区”。
      * (可选) `wx.setStorageSync('lesson_1_completed', true)` 标记本课已学。